mode: rule
log-level: warning

dns:
  # 解析非 IP 的 dns 用的 dns 服务器,只支持纯 IP
  default-nameserver: [114.111.115.115, 119.28.28.28, 223.6.6.6, system]
  # fake ip 白名单列表'以下地址不会下发fakeip映射用于连接
  fake-ip-filter:
    ['+.lan', '*', '+.local', '+.cmpassport.com', 'id6.me', 'open.e.189.cn', 'mdn.open.wo.cn', 'opencloud.wostore.cn', 'auth.wosms.cn', '+.10099.com.cn', '+.vanch.fun', '+.ipw.cn']
  # 默认的域名解析服务器
  nameserver: [https://dns.aliyun.com/dns-query, https://doh.pub/dns-query]

# > 订阅信息展示
# subscribe-url:

# > 远程服务器
subscribe: &s
  type: http
  interval: 3600
  url: http://your-service-provider
  health-check:
    enable: true
    url: https://www.google.com/generate_204
    interval: 6

proxy-providers:
  # 订阅名:
  #   <<: *s
  #   url: http://example.com

proxy-groups-config: &p
  interval: 300
  tolerance: 100
  timeout: 3000
  url: https://www.google.com/generate_204
  lazy: true
  max-failed-times: 2
  hidden: false

proxy-groups:
  - name: 地区选择 🌍
    <<: *p
    type: select
    proxies: [自动选择 📡, 手动选择 👌, 香港节点 🇭🇰, 日本节点 🇯🇵, 美国节点 🇺🇸, 台湾节点 🇨🇳, 新加坡节点 🇸🇬, 韩国节点 🇰🇷, 冷门地区 ❄️, 全局直连 🏠]
    icon: https://fastly.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Area.png

  - name: 冷门地区 ❄️
    <<: *p
    icon: https://fastly.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/World_Map.png
    type: select
    filter: ^(?!.*(?i)(剩|到|重|防|电报|群组|频道|维护|付费|官|更新|港|HK|Hong Kong|HongKong|🇭🇰|台|TAIWAN|TW|TAI WAN|🇹🇼|日本|JP|Japan|🇯🇵|韩国|KR|Korea|KOR|🇰🇷|新加坡|SG|Singapore|🇸🇬|美国|US|USA|United States|America|🇺🇸)).*$
    include-all: true

  - name: 手动选择 👌
    <<: *p
    icon: https://fastly.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Available.png
    type: select
    filter: ^(?!.*(?i)(剩|到|重|防|电报|群组|频道|维护|付费|官|更新)).*$
    include-all: true

  - name: 人工智能 🤖
    <<: *p
    icon: https://fastly.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Bot.png
    type: select
    proxies: [日本节点 🇯🇵, 美国节点 🇺🇸, 新加坡节点 🇸🇬, 地区选择 🌍, 手动选择 👌]

  - name: 巴哈姆特 📺
    <<: *p
    icon: https://fastly.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Bahamut.png
    type: select
    proxies: [台湾节点 🇨🇳, 地区选择 🌍, 手动选择 👌, 全局直连 🏠]

  - name: 谷歌服务 🇺🇸
    <<: *p
    icon: https://fastly.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Google_Search.png
    type: select
    proxies: [地区选择 🌍, 手动选择 👌, 香港节点 🇭🇰, 日本节点 🇯🇵, 美国节点 🇺🇸, 台湾节点 🇨🇳, 新加坡节点 🇸🇬, 韩国节点 🇰🇷, 冷门地区 ❄️]

  - name: 蒸汽平台 🎮
    <<: *p
    icon: https://fastly.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Steam.png
    type: select
    proxies: [地区选择 🌍, 手动选择 👌, 香港节点 🇭🇰, 日本节点 🇯🇵, 美国节点 🇺🇸, 台湾节点 🇨🇳, 新加坡节点 🇸🇬, 韩国节点 🇰🇷, 冷门地区 ❄️]

  - name: 奈飞服务 📺
    <<: *p
    icon: https://fastly.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Netflix.png
    type: select
    proxies: [地区选择 🌍, 手动选择 👌, 香港节点 🇭🇰, 日本节点 🇯🇵, 美国节点 🇺🇸, 台湾节点 🇨🇳, 新加坡节点 🇸🇬, 韩国节点 🇰🇷, 冷门地区 ❄️]

  - name: 电报服务 💬
    <<: *p
    icon: https://fastly.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Telegram.png
    type: select
    proxies: [地区选择 🌍, 手动选择 👌, 香港节点 🇭🇰, 日本节点 🇯🇵, 美国节点 🇺🇸, 台湾节点 🇨🇳, 新加坡节点 🇸🇬, 韩国节点 🇰🇷, 冷门地区 ❄️]

  - name: 微软服务 Ⓜ️
    <<: *p
    icon: https://fastly.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Microsoft.png
    type: select
    proxies: [全局直连 🏠, 地区选择 🌍, 手动选择 👌]

  - name: 苹果服务 🍎
    <<: *p
    icon: https://fastly.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Apple_1.png
    type: select
    proxies: [全局直连 🏠, 地区选择 🌍, 手动选择 👌]

  - name: 全局直连 🏠
    <<: *p
    url: http://wifi.vivo.com.cn/generate_204
    hidden: true
    icon: https://fastly.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Direct.png
    type: select
    proxies: [DIRECT, REJECT]

  - name: 全局拦截 🚧
    <<: *p
    url: http://wifi.vivo.com.cn/generate_204
    hidden: true
    icon: https://fastly.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Advertising.png
    type: select
    proxies: [REJECT, DIRECT]

  - name: 漏网之鱼 🐟
    <<: *p
    icon: https://fastly.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Final.png
    type: select
    proxies: [地区选择 🌍, 手动选择 👌, 全局直连 🏠]

  - name: GLOBAL
    <<: *p
    hidden: true
    icon: https://fastly.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Global.png
    type: select
    proxies: [地区选择 🌍, 手动选择 👌, 全局直连 🏠]

  - name: 自动选择 📡
    <<: *p
    hidden: true
    filter: ^(?!.*(?i)(剩|到|重|防|电报|群组|频道|维护|付费|官|更新)).*$
    icon: https://fastly.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Auto.png
    type: url-test
    include-all: true

  - name: 香港节点 🇭🇰
    <<: *p
    hidden: true
    filter: (?i)港|HK|Hong Kong|HongKong|🇭🇰
    icon: https://fastly.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Hong_Kong.png
    type: url-test
    include-all: true

  - name: 台湾节点 🇨🇳
    <<: *p
    hidden: true
    filter: (?i)台|TAIWAN|TW|TAI WAN|🇹🇼
    icon: https://fastly.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Taiwan.png
    type: url-test
    include-all: true

  - name: 美国节点 🇺🇸
    <<: *p
    hidden: true
    filter: (?i)United States|America|USA|US|🇺🇸|美国
    icon: https://fastly.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/United_States.png
    type: url-test
    include-all: true

  - name: 日本节点 🇯🇵
    <<: *p
    hidden: true
    filter: (?i)JP|🇯🇵|日本|Japan
    icon: https://fastly.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Japan.png
    type: url-test
    include-all: true

  - name: 新加坡节点 🇸🇬
    <<: *p
    hidden: true
    filter: (?i)SG|🇸🇬|新加坡|Singapore
    icon: https://fastly.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Singapore.png
    type: url-test
    include-all: true

  - name: 韩国节点 🇰🇷
    <<: *p
    hidden: true
    filter: (?i)韩国|KR|Korea|KOR|🇰🇷
    icon: https://fastly.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Korea.png
    type: url-test
    include-all: true

rule-providers-config: &r
  type: http
  format: yaml
  interval: 86400

rule-providers:
  prevent_dns_leak:
    <<: *r
    format: text
    behavior: domain
    url: https://cdn.jsdelivr.net/gh/xishang0128/rules@main/clash%20or%20stash/prevent_dns_leak/prevent_dns_leak_domain.list
    path: ./ruleset/prevent_dns_leak_domain.yaml

  # 去广告 ---------------------------------------------------------
  AdvertisingLite_Domain:
    <<: *r
    behavior: domain
    url: https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/AdvertisingLite/AdvertisingLite_Domain.yaml

  # 巴哈姆特 ------------------------------------------------------------
  Bahamut:
    <<: *r
    behavior: classical
    url: https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Bahamut/Bahamut.yaml

  #  Netflix ------------------------------------------------------------
  Netflix:
    <<: *r
    behavior: classical
    url: https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Netflix/Netflix.yaml

  Netflix_IP:
    <<: *r
    behavior: ipcidr
    url: https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Netflix/Netflix_IP.yaml

  # AI ------------------------------------------------------------
  Gemini:
    <<: *r
    behavior: classical
    url: https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Gemini/Gemini.yaml

  Copilot:
    <<: *r
    behavior: classical
    url: https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Copilot/Copilot.yaml

  Claude:
    <<: *r
    behavior: classical
    url: https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Claude/Claude.yaml

  BardAI:
    <<: *r
    behavior: classical
    url: https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/BardAI/BardAI.yaml

  OpenAI:
    <<: *r
    behavior: classical
    url: https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/OpenAI/OpenAI.yaml

  # 大陆域名、IP --------------------------------------------------------
  ChinaMax_Domain:
    <<: *r
    behavior: domain
    url: https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/ChinaMax/ChinaMax_Domain.yaml

  ChinaMax_IP:
    <<: *r
    behavior: ipcidr
    url: https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/ChinaMax/ChinaMax_IP.yaml

  # 谷歌ip ******************************************************
  GoogleIP:
    <<: *r
    behavior: ipcidr
    url: https://mirror.ghproxy.com/https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/google.yaml

  # 谷歌域名 --------------------------------------------------------
  Google:
    <<: *r
    behavior: classical
    url: https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Google/Google.yaml

  # YouTube域名 --------------------------------------------------------
  YouTube:
    <<: *r
    behavior: classical
    url: https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/YouTube/YouTube.yaml

  YouTubeMusic:
    <<: *r
    behavior: classical
    url: https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/YouTubeMusic/YouTubeMusic.yaml

  # 非大陆域名 ******************************************************
  geolocation-!cn:
    <<: *r
    behavior: domain
    url: https://mirror.ghproxy.com/https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/geolocation-!cn.yaml

  # 电报域名 -------------------------------------------------------
  Telegram:
    <<: *r
    behavior: classical
    url: https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Telegram/Telegram.yaml

  # Steam ---------------------------------------------------------
  Steam:
    <<: *r
    behavior: classical
    url: https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Steam/Steam.yaml

  #  SteamCN ---------------------------------------------------------
  SteamCN_No_Resolve:
    <<: *r
    behavior: classical
    url: https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/SteamCN/SteamCN_No_Resolve.yaml

  #  Apple ---------------------------------------------------------
  Apple_No_Resolve:
    <<: *r
    behavior: classical
    url: https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Apple/Apple_No_Resolve.yaml

  Apple_Domain:
    <<: *r
    behavior: domain
    url: https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Apple/Apple_Domain.yaml

  # Microsoft ---------------------------------------------------------
  Microsoft_No_Resolve:
    <<: *r
    behavior: classical
    url: https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Microsoft/Microsoft_No_Resolve.yaml

  # 局域网 ---------------------------------------------------------
  Lan_No_Resolve:
    <<: *r
    behavior: classical
    url: https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Lan/Lan_No_Resolve.yaml

  #  applications ******************************************************
  applications:
    <<: *r
    behavior: classical
    url: https://cdn.jsdelivr.net/gh/vanchkong/proxy-rules@release/applications-rules.txt

  # Github ---------------------------------------------------------
  Github:
    <<: *r
    behavior: classical
    url: https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/GitHub/GitHub.yaml

  # 自定义 ******************************************************
  custom-proxy:
    <<: *r
    behavior: classical
    url: https://cdn.jsdelivr.net/gh/vanchkong/proxy-rules@release/custom-proxy-rules.txt

  custom-direct:
    <<: *r
    behavior: classical
    url: https://cdn.jsdelivr.net/gh/vanchkong/proxy-rules@release/custom-direct-rules.txt

rules:
  - DOMAIN-SUFFIX,prevent_dns_leak,漏网之鱼 🐟
  - RULE-SET,applications,全局直连 🏠
  - RULE-SET,Lan_No_Resolve,全局直连 🏠
  - RULE-SET,custom-direct,全局直连 🏠
  - RULE-SET,custom-proxy,地区选择 🌍
  - RULE-SET,AdvertisingLite_Domain,全局拦截 🚧
  - RULE-SET,Microsoft_No_Resolve,微软服务 Ⓜ️
  - RULE-SET,Apple_No_Resolve,苹果服务 🍎
  - RULE-SET,Apple_Domain,苹果服务 🍎
  - RULE-SET,SteamCN_No_Resolve,全局直连 🏠
  - RULE-SET,Steam,蒸汽平台 🎮
  - RULE-SET,Bahamut,巴哈姆特 📺
  - RULE-SET,Netflix,奈飞服务 📺
  - RULE-SET,Netflix_IP,奈飞服务 📺
  - RULE-SET,Gemini,人工智能 🤖
  - RULE-SET,Copilot,人工智能 🤖
  - RULE-SET,Claude,人工智能 🤖
  - RULE-SET,BardAI,人工智能 🤖
  - RULE-SET,OpenAI,人工智能 🤖
  - RULE-SET,Telegram,电报服务 💬
  - RULE-SET,Google,谷歌服务 🇺🇸
  - RULE-SET,GoogleIP,谷歌服务 🇺🇸
  - RULE-SET,YouTube,谷歌服务 🇺🇸
  - RULE-SET,YouTubeMusic,谷歌服务 🇺🇸
  - RULE-SET,Github,地区选择 🌍
  - RULE-SET,geolocation-!cn,地区选择 🌍
  - RULE-SET,ChinaMax_Domain,全局直连 🏠
  - RULE-SET,ChinaMax_IP,全局直连 🏠,no-resolve
  - GEOIP,cn,全局直连 🏠,no-resolve
  - MATCH,漏网之鱼 🐟
